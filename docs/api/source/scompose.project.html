<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>scompose.project package &mdash; Singularity Compose API 1 documentation</title>
      <link rel="stylesheet" href="../assets/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../assets/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../assets/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../assets/documentation_options.js"></script>
        <script src="../assets/jquery.js"></script>
        <script src="../assets/underscore.js"></script>
        <script src="../assets/doctools.js"></script>
    <script src="../assets/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scompose.templates package" href="scompose.templates.html" />
    <link rel="prev" title="scompose.logger package" href="scompose.logger.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Singularity Compose API
          </a>
              <div class="version">
                0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="scompose.html">scompose package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="scompose.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="scompose.client.html">scompose.client package</a></li>
<li class="toctree-l3"><a class="reference internal" href="scompose.logger.html">scompose.logger package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">scompose.project package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-scompose.project.instance">scompose.project.instance module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-scompose.project.project">scompose.project.project module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-scompose.project">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="scompose.templates.html">scompose.templates package</a></li>
<li class="toctree-l3"><a class="reference internal" href="scompose.tests.html">scompose.tests package</a></li>
<li class="toctree-l3"><a class="reference internal" href="scompose.utils.html">scompose.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="scompose.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="scompose.html#module-scompose.version">scompose.version module</a></li>
<li class="toctree-l2"><a class="reference internal" href="scompose.html#module-scompose">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Singularity Compose API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="scompose.html">scompose package</a> &raquo;</li>
      <li>scompose.project package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/scompose.project.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="scompose-project-package">
<h1>scompose.project package<a class="headerlink" href="#scompose-project-package" title="Permalink to this headline"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</div>
<div class="section" id="module-scompose.project.instance">
<span id="scompose-project-instance-module"></span><h2>scompose.project.instance module<a class="headerlink" href="#module-scompose.project.instance" title="Permalink to this headline"></a></h2>
<p>Copyright (C) 2019-2021 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="scompose.project.instance.Instance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">scompose.project.instance.</span></code><code class="sig-name descname"><span class="pre">Instance</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em>, <em><span class="n"><span class="pre">working_dir</span></span></em>, <em><span class="n"><span class="pre">sudo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A section of a singularity-compose.yml, typically includes an image
name, volumes, build directory, and any ports or environment variables
relevant to the instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>should correspond to the section name for the instance.</em>)</li>
<li><strong>working_dir</strong> (<em>should be the projects working directory, where a folder</em>) – named according to “name” is created for the image binary.</li>
<li><strong>params</strong> (<em>all of the parameters defined in the configuration.</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.build">
<code class="sig-name descname"><span class="pre">build</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">working_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.build" title="Permalink to this definition"></a></dt>
<dd><p>build an image if called for based on having a recipe and context.
Otherwise, pull a container uri to the instance workspace.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.clear_logs">
<code class="sig-name descname"><span class="pre">clear_logs</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.clear_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.clear_logs" title="Permalink to this definition"></a></dt>
<dd><p>delete logs for an instance, if they exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.create">
<code class="sig-name descname"><span class="pre">create</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">sudo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">writable_tmpfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.create" title="Permalink to this definition"></a></dt>
<dd><p>create an instance, if it doesn’t exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.exists">
<code class="sig-name descname"><span class="pre">exists</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.exists" title="Permalink to this definition"></a></dt>
<dd><p>return boolean if an instance exists. We do this by way of listing
instances, and so the calling user is important.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.get" title="Permalink to this definition"></a></dt>
<dd><p>If an instance exists, add to self.instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.get_address">
<code class="sig-name descname"><span class="pre">get_address</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.get_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.get_address" title="Permalink to this definition"></a></dt>
<dd><p>get the bridge address of an image. If it’s busybox, we can’t use
hostname -I.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.get_build_options">
<code class="sig-name descname"><span class="pre">get_build_options</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.get_build_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.get_build_options" title="Permalink to this definition"></a></dt>
<dd><p>‘get build options will parse through params, and return build
options (if they exist)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.get_image">
<code class="sig-name descname"><span class="pre">get_image</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.get_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.get_image" title="Permalink to this definition"></a></dt>
<dd><p>get the associated instance image name, to be built if it doesn’t
exit. It can either be defined at the config from self.image, or
ultimately generated via a pull from a uri.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.logs">
<code class="sig-name descname"><span class="pre">logs</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">tail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.logs" title="Permalink to this definition"></a></dt>
<dd><p>show logs for an instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.run_post">
<code class="sig-name descname"><span class="pre">run_post</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.run_post"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.run_post" title="Permalink to this definition"></a></dt>
<dd><dl class="docutils">
<dt>run post create commands. Can be added to an instance definition</dt><dd>either to run a command directly, or execute a script. The path
is assumed to be on the host.</dd>
<dt>post:</dt><dd>command: [“mkdir”, “-p”, “./images/_upload/{0..9}”]</dd>
</dl>
<p>OR</p>
<dl class="docutils">
<dt>post:</dt><dd>command: “mkdir -p ./images/_upload/{0..9}”</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_context">
<code class="sig-name descname"><span class="pre">set_context</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_context"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_context" title="Permalink to this definition"></a></dt>
<dd><p>set and validate parameters from the singularity-compose.yml,
including build (context and recipe). We don’t pull or create
anything here, but rather just validate that the sections
are provided and files exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_exec">
<code class="sig-name descname"><span class="pre">set_exec</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_exec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_exec" title="Permalink to this definition"></a></dt>
<dd><p>set arguments for exec</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_name">
<code class="sig-name descname"><span class="pre">set_name</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em>, <em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_name" title="Permalink to this definition"></a></dt>
<dd><p>set the instance name. First priority goes to name  parameter, then
to name in file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>the name of the instance, the first field in the config file.</em>)</li>
<li><strong>params</strong> (<em>dictionary of key, value parameters</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_network">
<code class="sig-name descname"><span class="pre">set_network</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_network"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_network" title="Permalink to this definition"></a></dt>
<dd><p>set network from the recipe to be used</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_ports">
<code class="sig-name descname"><span class="pre">set_ports</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_ports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_ports" title="Permalink to this definition"></a></dt>
<dd><p>set ports from the recipe to be used</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_run">
<code class="sig-name descname"><span class="pre">set_run</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_run" title="Permalink to this definition"></a></dt>
<dd><p>set arguments for run</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_start">
<code class="sig-name descname"><span class="pre">set_start</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_start" title="Permalink to this definition"></a></dt>
<dd><p>set arguments to the startscript</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_volumes">
<code class="sig-name descname"><span class="pre">set_volumes</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_volumes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_volumes" title="Permalink to this definition"></a></dt>
<dd><p>set volumes from the recipe</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.set_volumes_from">
<code class="sig-name descname"><span class="pre">set_volumes_from</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">instances</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.set_volumes_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.set_volumes_from" title="Permalink to this definition"></a></dt>
<dd><p>volumes from is called after all instances are read in, and
then volumes can be mapped (and shared) with both containers.
with Docker, this is done with isolation, but for Singularity
we will try sharing a bind on the host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instances</strong> (<em>a list of other instances to get volumes from</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.stop">
<code class="sig-name descname"><span class="pre">stop</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.stop" title="Permalink to this definition"></a></dt>
<dd><p>delete the instance, if it exists. Singularity doesn’t have delete
or remove commands, everyting is a stop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.up">
<code class="sig-name descname"><span class="pre">up</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">working_dir</span></span></em>, <em><span class="n"><span class="pre">ip_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">writable_tmpfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/instance.html#Instance.up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.instance.Instance.up" title="Permalink to this definition"></a></dt>
<dd><p>up is the same as create, but like Docker, we build / pull instances
first.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="scompose.project.instance.Instance.uri">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">uri</span></code><a class="headerlink" href="#scompose.project.instance.Instance.uri" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scompose.project.project">
<span id="scompose-project-project-module"></span><h2>scompose.project.project module<a class="headerlink" href="#module-scompose.project.project" title="Permalink to this headline"></a></h2>
<p>Copyright (C) 2019-2021 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="scompose.project.project.Project">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">scompose.project.project.</span></code><code class="sig-name descname"><span class="pre">Project</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">env_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A compose project is a group of containers read in from a config file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.build">
<code class="sig-name descname"><span class="pre">build</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.build"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.build" title="Permalink to this definition"></a></dt>
<dd><p>Given a loaded project, build associated containers (or pull).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.clear_logs">
<code class="sig-name descname"><span class="pre">clear_logs</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.clear_logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.clear_logs" title="Permalink to this definition"></a></dt>
<dd><p>Clear_logs will remove all old error and output logs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>names</strong> (<em>a list of names to clear logs for. We require the user</em>) – to specifically name instances.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scompose.project.project.Project.config">
<code class="sig-name descname"><span class="pre">config</span></code><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#scompose.project.project.Project.config" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.create">
<code class="sig-name descname"><span class="pre">create</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">writable_tmpfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em><span class="n"><span class="pre">bridge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'10.22.0.0/16'</span></span></em>, <em><span class="n"><span class="pre">no_resolv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.create"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.create" title="Permalink to this definition"></a></dt>
<dd><p>Call the create function, which defaults to the command instance.create()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.create_hosts">
<code class="sig-name descname"><span class="pre">create_hosts</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">lookup</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.create_hosts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.create_hosts" title="Permalink to this definition"></a></dt>
<dd><p>create a hosts file to bind to all containers, where we define the
correct hostnames to correspond with the ip addresses created.
Note: This function is terrible. Singularity should easily expose</p>
<blockquote>
<div>these addresses. See issue here:
<a class="reference external" href="https://github.com/sylabs/singularity/issues/3751">https://github.com/sylabs/singularity/issues/3751</a></div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lookup</strong> (<em>a lookup of ip addresses to assign the containers</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.down">
<code class="sig-name descname"><span class="pre">down</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.down"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.down" title="Permalink to this definition"></a></dt>
<dd><p>Stop one or more instances.
If no names are provided, bring them all down.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>names</strong> (<em>a list of names of instances to bring down. If not specified, we</em>)</li>
<li><strong>bring down all instances.</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.execute">
<code class="sig-name descname"><span class="pre">execute</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em>, <em><span class="n"><span class="pre">commands</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.execute" title="Permalink to this definition"></a></dt>
<dd><p>If an instance exists, execute a command to it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>the name of the instance to exec to</em>)</li>
<li><strong>commands</strong> (<em>a list of commands to issue</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.generate_resolv_conf">
<code class="sig-name descname"><span class="pre">generate_resolv_conf</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.generate_resolv_conf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.generate_resolv_conf" title="Permalink to this definition"></a></dt>
<dd><p>Generate a resolv.conf file to bind to the containers.</p>
<p>We use the template provided by scompose.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.get_already_running">
<code class="sig-name descname"><span class="pre">get_already_running</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.get_already_running"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.get_already_running" title="Permalink to this definition"></a></dt>
<dd><p>Get already running instances.</p>
<p>Since a user can bring select instances up and down, we need to
derive a list of already running instances to include</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.get_bridge_address">
<code class="sig-name descname"><span class="pre">get_bridge_address</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sbr0'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.get_bridge_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.get_bridge_address" title="Permalink to this definition"></a></dt>
<dd><p>Get the (named) bridge address on the host.</p>
<p>It should be automatically created by Singularity over 3.0. This function
currently is not used, but is left in case it’s needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>The default name of the Singularity bridge (sbr0)</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.get_instance">
<code class="sig-name descname"><span class="pre">get_instance</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.get_instance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.get_instance" title="Permalink to this definition"></a></dt>
<dd><p>Get a specifically named instance.</p>
<p>We first check that the client has instances defined, and that the name
we are looking for is also included. If not found, we return None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>names</strong> (<em>the name of instances to get. Must be valid</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.get_instance_names">
<code class="sig-name descname"><span class="pre">get_instance_names</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.get_instance_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.get_instance_names" title="Permalink to this definition"></a></dt>
<dd><p>Return a list of names.</p>
<p>Do this if a config file is loaded, and instances are defined.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.get_ip_lookup">
<code class="sig-name descname"><span class="pre">get_ip_lookup</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span></em>, <em><span class="n"><span class="pre">bridge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'10.22.0.0/16'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.get_ip_lookup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.get_ip_lookup" title="Permalink to this definition"></a></dt>
<dd><p>Generate a pre-determined address for each container.</p>
<p>Based on a bridge address that can serve other addresses (akin to
a router, metaphorically, generate a pre-determined address for
each container.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>names</strong> (<em>a list of names of instances to generate addresses for.</em>)</li>
<li><strong>bridge</strong> (<em>the bridge address to derive them for.</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="scompose.project.project.Project.instances">
<code class="sig-name descname"><span class="pre">instances</span></code><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#scompose.project.project.Project.instances" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.iter_instances">
<code class="sig-name descname"><span class="pre">iter_instances</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.iter_instances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.iter_instances" title="Permalink to this definition"></a></dt>
<dd><p>Yield instances one at a time.</p>
<p>If an invalid name is given, exit with error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>names</strong> (<em>the names of instances to yield. Must be valid</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.load">
<code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.load" title="Permalink to this definition"></a></dt>
<dd><p>Load a singularity-compose.yml recipe, and validate it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.logs">
<code class="sig-name descname"><span class="pre">logs</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">tail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.logs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.logs" title="Permalink to this definition"></a></dt>
<dd><p>Logs will print logs to the screen.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>names</strong> (<em>a list of names of instances to show logs for.</em>) – If not specified, show logs for all.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.parse">
<code class="sig-name descname"><span class="pre">parse</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.parse" title="Permalink to this definition"></a></dt>
<dd><p>Parse a loaded config</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.ps">
<code class="sig-name descname"><span class="pre">ps</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.ps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.ps" title="Permalink to this definition"></a></dt>
<dd><p>Ps will print a table of instances, including pids and names.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.run" title="Permalink to this definition"></a></dt>
<dd><p>If an instance exists, run it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>the name of the instance to run</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.set_filename">
<code class="sig-name descname"><span class="pre">set_filename</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.set_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.set_filename" title="Permalink to this definition"></a></dt>
<dd><p>Set the filename to read the recipe from.</p>
<p>If not provided, defaults to singularity-compose.yml. The working directory
is set to be the directory name of the configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>the singularity-compose.yml file to use</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.set_name">
<code class="sig-name descname"><span class="pre">set_name</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.set_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.set_name" title="Permalink to this definition"></a></dt>
<dd><p>Set the filename to read the recipe from.</p>
<p>If not provided, defaults to singularity-compose.yml</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>if a customize name is provided, use it</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.shell">
<code class="sig-name descname"><span class="pre">shell</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.shell"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.shell" title="Permalink to this definition"></a></dt>
<dd><p>If an instance exists, shell into it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>the name of the instance to shell into</em>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.up">
<code class="sig-name descname"><span class="pre">up</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">writable_tmpfs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em><span class="n"><span class="pre">bridge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'10.22.0.0/16'</span></span></em>, <em><span class="n"><span class="pre">no_resolv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.up"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.up" title="Permalink to this definition"></a></dt>
<dd><p>Call the up function, instance.up().</p>
<p>This will build before if a container binary does not exist.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="scompose.project.project.Project.view_config">
<code class="sig-name descname"><span class="pre">view_config</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../modules/scompose/project/project.html#Project.view_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#scompose.project.project.Project.view_config" title="Permalink to this definition"></a></dt>
<dd><p>print a configuration file (in json) to the screen.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-scompose.project">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-scompose.project" title="Permalink to this headline"></a></h2>
<p>Copyright (C) 2019-2021 Vanessa Sochat.</p>
<p>This Source Code Form is subject to the terms of the
Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed
with this file, You can obtain one at <a class="reference external" href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scompose.logger.html" class="btn btn-neutral float-left" title="scompose.logger package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scompose.templates.html" class="btn btn-neutral float-right" title="scompose.templates package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Vanessa Sochat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>